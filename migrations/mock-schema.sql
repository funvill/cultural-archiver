-- Cultural Archiver Database Schema (Mock)
-- Generated on: 2025-09-04T16:31:29.976Z
-- Generated by: extract-schema.ts (mock mode)
-- Version: mock-baseline-2025-09-04T16-31-29-976Z

-- Enable foreign key constraints
PRAGMA foreign_keys = ON;

-- ================================
-- Tables
-- ================================

-- Table: users
CREATE TABLE users (id TEXT PRIMARY KEY, email TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP);

-- Table: submissions
CREATE TABLE submissions (id TEXT PRIMARY KEY, user_id TEXT, title TEXT, status TEXT DEFAULT "pending", FOREIGN KEY(user_id) REFERENCES users(id));

-- ================================
-- Indexes
-- ================================

-- Index: idx_submissions_user_id
CREATE INDEX idx_submissions_user_id ON submissions(user_id);

-- ================================
-- Sample Data
-- ================================

-- Cultural Archiver Sample Data
-- Generated on: 2025-01-01T00:00:00.000Z
-- Default timestamp: 2025-01-01T00:00:00.000Z
--
-- This file contains sample data as specified in the PRD:
-- - Three predefined users with specified UUIDs
-- - Sample artworks with Vancouver area coordinates (within 100m of 49.2679864,-123.0239578)
-- - Sample logbook entries with proper foreign key relationships
-- - Sample moderation records
-- - All timestamps default to January 1, 2025

-- ================================
-- Pre-populate artwork types
-- ================================
INSERT OR IGNORE INTO artwork_types (id, name, description) VALUES
    ('public_art', 'Public Art', 'Public art installations and commissioned works'),
    ('street_art', 'Street Art', 'Street art, murals, and graffiti'),
    ('mural', 'Mural', 'Large wall paintings and murals'),
    ('monument', 'Monument', 'Monuments, memorials, and commemorative structures'),
    ('sculpture', 'Sculpture', 'Sculptural works and installations'),
    ('installation', 'Installation', 'Art installations and interactive works'),
    ('other', 'Other', 'Other types of public artwork');

-- ================================
-- Sample Users (as specified in PRD)
-- ================================
INSERT OR IGNORE INTO users (uuid, email, display_name, role, email_verified_at, created_at, updated_at)
VALUES 
    ('00000000-0000-0000-0000-000000000001', 'sampledata@funvill.com', 'Sample Data User', 'user', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('00000000-0000-0000-0000-000000000002', 'massimport@funvill.com', 'Mass Import User', 'user', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'steven@abluestar.com', 'Steven Smethurst', 'admin', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample Creators
-- ================================
INSERT OR IGNORE INTO creators (id, name, bio, created_at) VALUES
    ('creator-emily-chen', 'Emily Chen', 'Contemporary sculptor specializing in bronze works', '2025-01-01T00:00:00.000Z'),
    ('creator-david-martinez', 'David Martinez', 'Street artist and muralist active in Vancouver', '2025-01-01T00:00:00.000Z'),
    ('creator-sarah-thompson', 'Sarah Thompson', 'Public art designer and urban planner', '2025-01-01T00:00:00.000Z'),
    ('creator-unknown', 'Unknown Artist', 'Placeholder for artworks with unknown creators', '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample Artwork (within 100m of Vancouver coordinates: 49.2679864,-123.0239578)
-- All assigned to massimport@funvill.com as specified in PRD
-- ================================
INSERT OR IGNORE INTO artwork (id, lat, lon, type_id, status, title, description, user_token, photos, tags, notes, location_description, created_at, updated_at)
VALUES 
    ('artwork-sample-001', 49.2685, -123.0235, 'mural', 'approved', 'Rainbow Hearts Mural', 'Colorful mural featuring rainbow hearts and positive messages', '00000000-0000-0000-0000-000000000002', '[]', '["street-art", "colorful", "community"]', 'Beautiful community mural on the side of a local business', 'Near Vancouver Art Gallery, West Side', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('artwork-sample-002', 49.2675, -123.0245, 'sculpture', 'approved', 'Steel Wave Sculpture', 'Modern steel sculpture resembling ocean waves', '00000000-0000-0000-0000-000000000002', '[]', '["modern", "metal", "ocean"]', 'Impressive steel sculpture that changes appearance with lighting', 'Downtown Vancouver, Robson Square Area', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('artwork-sample-003', 49.2680, -123.0240, 'installation', 'pending', 'Interactive Light Display', 'Digital art installation with responsive LED displays', '00000000-0000-0000-0000-000000000002', '[]', '["interactive", "digital", "lights"]', 'Interactive installation that responds to movement and sound', 'Vancouver Convention Centre Area', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z');

-- ================================
-- Link artworks to creators
-- ================================
INSERT OR IGNORE INTO artwork_creators (id, artwork_id, creator_id, role, created_at) VALUES
    ('ac-001', 'artwork-sample-001', 'creator-david-martinez', 'artist', '2025-01-01T00:00:00.000Z'),
    ('ac-002', 'artwork-sample-002', 'creator-emily-chen', 'sculptor', '2025-01-01T00:00:00.000Z'),
    ('ac-003', 'artwork-sample-003', 'creator-sarah-thompson', 'designer', '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample Logbook Entries (linked to artworks and users)
-- All assigned to massimport@funvill.com as specified in PRD
-- ================================
INSERT OR IGNORE INTO logbook (id, artwork_id, user_token, lat, lon, status, notes, photos, created_at, updated_at)
VALUES 
    -- Approved entries
    ('logbook-sample-001', 'artwork-sample-001', '00000000-0000-0000-0000-000000000002', 49.2685, -123.0235, 'approved', 'First documentation of the rainbow hearts mural. Great condition and very popular with locals.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-002', 'artwork-sample-001', '00000000-0000-0000-0000-000000000001', 49.2685, -123.0235, 'approved', 'Second visit to the mural - still looks great, no signs of wear.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-003', 'artwork-sample-002', '00000000-0000-0000-0000-000000000002', 49.2675, -123.0245, 'approved', 'Documentation of steel wave sculpture. Impressive craftsmanship and beautiful in the evening light.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-004', 'artwork-sample-002', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 49.2675, -123.0245, 'approved', 'Admin review of sculpture - excellent condition, well-maintained by city.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-006', 'artwork-sample-001', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 49.2685, -123.0235, 'approved', 'Final approval notes - mural meets all guidelines and adds value to the community.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-007', 'artwork-sample-002', '00000000-0000-0000-0000-000000000001', 49.2675, -123.0245, 'approved', 'Community feedback - this sculpture has become a popular meeting spot.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-009', 'artwork-sample-001', '00000000-0000-0000-0000-000000000002', 49.2685, -123.0235, 'approved', 'Condition update - some minor fading but overall excellent condition.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    
    -- Pending entries
    ('logbook-sample-005', 'artwork-sample-003', '00000000-0000-0000-0000-000000000002', 49.2680, -123.0240, 'pending', 'Initial documentation of interactive light display. Installation appears to be complete.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-008', 'artwork-sample-003', '00000000-0000-0000-0000-000000000001', 49.2680, -123.0240, 'pending', 'User submission notes - the interactive features work well during evening hours.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample Tags
-- ================================
INSERT OR IGNORE INTO tags (id, artwork_id, logbook_id, label, value, created_at) VALUES
    ('tag-001', 'artwork-sample-001', NULL, 'material', 'paint', '2025-01-01T00:00:00.000Z'),
    ('tag-002', 'artwork-sample-001', NULL, 'style', 'street-art', '2025-01-01T00:00:00.000Z'),
    ('tag-003', 'artwork-sample-001', NULL, 'theme', 'community', '2025-01-01T00:00:00.000Z'),
    ('tag-004', 'artwork-sample-002', NULL, 'material', 'steel', '2025-01-01T00:00:00.000Z'),
    ('tag-005', 'artwork-sample-002', NULL, 'style', 'modern', '2025-01-01T00:00:00.000Z'),
    ('tag-006', 'artwork-sample-002', NULL, 'theme', 'ocean', '2025-01-01T00:00:00.000Z'),
    ('tag-007', 'artwork-sample-003', NULL, 'material', 'led', '2025-01-01T00:00:00.000Z'),
    ('tag-008', 'artwork-sample-003', NULL, 'style', 'digital', '2025-01-01T00:00:00.000Z'),
    ('tag-009', NULL, 'logbook-sample-004', 'condition', 'excellent', '2025-01-01T00:00:00.000Z'),
    ('tag-010', NULL, 'logbook-sample-007', 'popularity', 'high', '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample Consent Records
-- ================================
INSERT OR IGNORE INTO consent_records (id, user_token, consent_version, age_verification, cc0_licensing, public_commons, freedom_of_panorama, consented_at) VALUES
    ('consent-001', '00000000-0000-0000-0000-000000000001', '1.0.0', TRUE, TRUE, TRUE, TRUE, '2025-01-01T00:00:00.000Z'),
    ('consent-002', '00000000-0000-0000-0000-000000000002', '1.0.0', TRUE, TRUE, TRUE, TRUE, '2025-01-01T00:00:00.000Z'),
    ('consent-003', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', '1.0.0', TRUE, TRUE, TRUE, TRUE, '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample Moderation Records (assigned to steven@abluestar.com)
-- ================================
INSERT OR IGNORE INTO moderation (id, artwork_id, logbook_id, moderator_uuid, action, reason, status, created_at, updated_at)
VALUES 
    ('moderation-001', 'artwork-sample-001', NULL, '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'approve', 'Quality artwork submission that meets all guidelines', 'completed', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('moderation-002', 'artwork-sample-002', NULL, '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'approve', 'Excellent sculpture submission with proper documentation', 'completed', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('moderation-003', NULL, 'logbook-sample-005', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'approve', 'Pending review of interactive installation documentation', 'pending', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('moderation-004', NULL, 'logbook-sample-008', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'approve', 'Community feedback review - valuable user input', 'pending', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample User Permissions
-- ================================
INSERT OR IGNORE INTO user_permissions (id, user_uuid, permission, granted_by, granted_at, is_active, notes) VALUES
    ('perm-001', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'admin', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', '2025-01-01T00:00:00.000Z', 1, 'System administrator privileges');

-- ================================
-- Sample Admin Audit Log
-- ================================
INSERT OR IGNORE INTO admin_audit_log (id, admin_uuid, target_uuid, action, resource_type, resource_id, old_values, new_values, created_at)
VALUES 
    ('audit-001', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', NULL, 'artwork_approve', 'artwork', 'artwork-sample-001', '{"status": "pending"}', '{"status": "approved"}', '2025-01-01T00:00:00.000Z'),
    ('audit-002', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', NULL, 'artwork_approve', 'artwork', 'artwork-sample-002', '{"status": "pending"}', '{"status": "approved"}', '2025-01-01T00:00:00.000Z'),
    ('audit-003', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'permission_grant', 'user_permissions', 'perm-001', '{}', '{"permission": "admin"}', '2025-01-01T00:00:00.000Z');
