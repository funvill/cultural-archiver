-- Cultural Archiver Database Schema (Consolidated)
-- Extracted on: 2025-09-04T16:39:49.800Z
-- Generated by: extract-schema.ts
-- Version: consolidated-baseline-2025-09-04T16-39-49-799Z

-- Enable foreign key constraints
PRAGMA foreign_keys = ON;

-- ================================
-- Tables
-- ================================

-- Table: _cf_KV
CREATE TABLE _cf_KV (
        key TEXT PRIMARY KEY,
        value BLOB
      ) WITHOUT ROWID;

-- Table: admin_actions
CREATE TABLE admin_actions (
    id TEXT PRIMARY KEY,
    admin_uuid TEXT NOT NULL, -- admin performing the action
    action_type TEXT NOT NULL CHECK (action_type IN ('grant_permission', 'revoke_permission', 'view_audit_logs')),
    target_uuid TEXT, -- user being affected (for permission changes)
    permission_type TEXT, -- 'moderator' or 'admin' (for permission actions)
    old_value TEXT, -- previous state (JSON for complex changes)
    new_value TEXT, -- new state (JSON for complex changes)
    reason TEXT, -- reason for the action
    metadata TEXT, -- JSON: IP, user agent, session info
    created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

-- Table: artwork
CREATE TABLE artwork (
    id TEXT PRIMARY KEY,
    lat REAL NOT NULL,
    lon REAL NOT NULL,
    type_id TEXT NOT NULL,
    created_at TEXT NOT NULL DEFAULT (datetime('now')),
    status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'approved', 'removed')),
    tags TEXT, -- JSON object for key-value metadata like {"material": "bronze", "style": "modern"}
    FOREIGN KEY (type_id) REFERENCES artwork_types(id)
);

-- Table: artwork_types
CREATE TABLE artwork_types (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL UNIQUE,
    description TEXT,
    created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

-- Table: auth_sessions
CREATE TABLE auth_sessions (
    id TEXT PRIMARY KEY,  -- Session identifier (UUID)
    user_uuid TEXT NOT NULL,  -- Associated user UUID
    token_hash TEXT NOT NULL,  -- Hash of the session token for security
    created_at TEXT NOT NULL DEFAULT (datetime('now')),  -- Session creation timestamp
    last_accessed_at TEXT NOT NULL DEFAULT (datetime('now')),  -- Last access timestamp
    expires_at TEXT,  -- Session expiration (NULL for persistent sessions)
    ip_address TEXT,  -- IP address of session
    user_agent TEXT,  -- User agent of session
    is_active BOOLEAN NOT NULL DEFAULT TRUE,  -- Session active status
    device_info TEXT,  -- Optional device fingerprint/info (JSON)
    FOREIGN KEY (user_uuid) REFERENCES users(uuid) ON DELETE CASCADE,
    CONSTRAINT auth_session_hash_length CHECK (length(token_hash) = 64),  -- SHA-256 hash
    CONSTRAINT auth_session_accessed_valid CHECK (last_accessed_at >= created_at)
);

-- Table: logbook
CREATE TABLE logbook (
    id TEXT PRIMARY KEY,
    artwork_id TEXT,
    user_token TEXT NOT NULL,
    note TEXT,
    photos TEXT, -- JSON array of R2 URLs like ["url1", "url2", "url3"]
    status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'approved', 'rejected')),
    created_at TEXT NOT NULL DEFAULT (datetime('now')), lat REAL, lon REAL,
    FOREIGN KEY (artwork_id) REFERENCES artwork(id) ON DELETE CASCADE
);

-- Table: magic_links
CREATE TABLE magic_links (
    token TEXT PRIMARY KEY,  -- Cryptographically secure token (32+ bytes)
    email TEXT NOT NULL,  -- Target email address
    user_uuid TEXT,  -- Associated user UUID (NULL for new account creation)
    created_at TEXT NOT NULL DEFAULT (datetime('now')),  -- Token generation timestamp
    expires_at TEXT NOT NULL,  -- Token expiration (1 hour from creation)
    used_at TEXT,  -- When token was consumed (NULL if not used)
    ip_address TEXT,  -- IP address that requested the magic link
    user_agent TEXT,  -- User agent that requested the magic link
    is_signup BOOLEAN NOT NULL DEFAULT FALSE,  -- TRUE for account creation, FALSE for login
    FOREIGN KEY (user_uuid) REFERENCES users(uuid) ON DELETE CASCADE,
    CONSTRAINT magic_link_token_length CHECK (length(token) >= 64),  -- Min 32 bytes = 64 hex chars
    CONSTRAINT magic_link_expires_valid CHECK (expires_at > created_at),
    CONSTRAINT magic_link_used_valid CHECK (used_at IS NULL OR used_at >= created_at)
);

-- Table: moderation_decisions
CREATE TABLE moderation_decisions (
    id TEXT PRIMARY KEY,
    submission_id TEXT NOT NULL, -- logbook entry ID
    moderator_uuid TEXT NOT NULL, -- who made the decision
    decision TEXT NOT NULL CHECK (decision IN ('approved', 'rejected', 'skipped')),
    reason TEXT, -- reason for rejection or notes
    metadata TEXT, -- JSON: IP, user agent, session info
    artwork_id TEXT, -- created or linked artwork ID (for approvals)
    action_taken TEXT, -- 'create_new', 'link_existing', or NULL for rejections
    photos_processed INTEGER DEFAULT 0, -- number of photos migrated
    created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

-- Table: rate_limiting
CREATE TABLE rate_limiting (
    identifier TEXT NOT NULL,  -- Email address or IP address
    identifier_type TEXT NOT NULL CHECK (identifier_type IN ('email', 'ip')),  -- Type of identifier
    request_count INTEGER NOT NULL DEFAULT 0,  -- Number of requests in current window
    window_start TEXT NOT NULL DEFAULT (datetime('now')),  -- Start of current rate limit window
    last_request_at TEXT NOT NULL DEFAULT (datetime('now')),  -- Timestamp of most recent request
    blocked_until TEXT,  -- Block identifier until this time (NULL if not blocked)
    PRIMARY KEY (identifier, identifier_type),
    CONSTRAINT rate_limit_count_positive CHECK (request_count >= 0),
    CONSTRAINT rate_limit_window_valid CHECK (last_request_at >= window_start)
);

-- Table: tags
CREATE TABLE tags (
    id TEXT PRIMARY KEY,
    artwork_id TEXT,
    logbook_id TEXT,
    label TEXT NOT NULL,
    value TEXT NOT NULL,
    created_at TEXT NOT NULL DEFAULT (datetime('now')),
    FOREIGN KEY (artwork_id) REFERENCES artwork(id) ON DELETE CASCADE,
    FOREIGN KEY (logbook_id) REFERENCES logbook(id) ON DELETE CASCADE
);

-- Table: user_permissions
CREATE TABLE user_permissions (
    id TEXT PRIMARY KEY,
    user_uuid TEXT NOT NULL,
    permission TEXT NOT NULL CHECK (permission IN ('moderator', 'admin')),
    granted_by TEXT NOT NULL, -- admin user_uuid who granted this permission
    granted_at TEXT NOT NULL DEFAULT (datetime('now')),
    revoked_at TEXT NULL,
    revoked_by TEXT NULL,
    is_active INTEGER NOT NULL DEFAULT 1 CHECK (is_active IN (0, 1)),
    notes TEXT -- reason for granting/revoking
);

-- Table: users
CREATE TABLE users (
    uuid TEXT PRIMARY KEY,  -- User's claimed UUID (same as anonymous token)
    email TEXT NOT NULL UNIQUE,  -- User's email address
    created_at TEXT NOT NULL DEFAULT (datetime('now')),  -- Account creation timestamp
    last_login TEXT,  -- Last login timestamp (NULL for new accounts)
    email_verified_at TEXT,  -- When email was verified via magic link (NULL if not verified)
    status TEXT NOT NULL DEFAULT 'active' CHECK (status IN ('active', 'suspended')),  -- Account status
    CONSTRAINT users_uuid_format CHECK (uuid LIKE '________-____-4___-____-____________')  -- UUID v4 format validation
);

-- ================================
-- Indexes
-- ================================

-- Index: idx_admin_actions_admin
CREATE INDEX idx_admin_actions_admin ON admin_actions(admin_uuid);

-- Index: idx_admin_actions_created_at
CREATE INDEX idx_admin_actions_created_at ON admin_actions(created_at);

-- Index: idx_admin_actions_target
CREATE INDEX idx_admin_actions_target ON admin_actions(target_uuid) WHERE target_uuid IS NOT NULL;

-- Index: idx_admin_actions_type
CREATE INDEX idx_admin_actions_type ON admin_actions(action_type);

-- Index: idx_artwork_lat_lon
CREATE INDEX idx_artwork_lat_lon ON artwork(lat, lon);

-- Index: idx_artwork_status
CREATE INDEX idx_artwork_status ON artwork(status);

-- Index: idx_artwork_type_id
CREATE INDEX idx_artwork_type_id ON artwork(type_id);

-- Index: idx_artwork_types_name
CREATE INDEX idx_artwork_types_name ON artwork_types(name);

-- Index: idx_auth_sessions_active
CREATE INDEX idx_auth_sessions_active ON auth_sessions(is_active);

-- Index: idx_auth_sessions_expires_at
CREATE INDEX idx_auth_sessions_expires_at ON auth_sessions(expires_at);

-- Index: idx_auth_sessions_last_accessed
CREATE INDEX idx_auth_sessions_last_accessed ON auth_sessions(last_accessed_at);

-- Index: idx_auth_sessions_token_hash
CREATE INDEX idx_auth_sessions_token_hash ON auth_sessions(token_hash);

-- Index: idx_auth_sessions_user_uuid
CREATE INDEX idx_auth_sessions_user_uuid ON auth_sessions(user_uuid);

-- Index: idx_logbook_artwork_id
CREATE INDEX idx_logbook_artwork_id ON logbook(artwork_id);

-- Index: idx_logbook_lat_lon
CREATE INDEX idx_logbook_lat_lon ON logbook(lat, lon);

-- Index: idx_logbook_status
CREATE INDEX idx_logbook_status ON logbook(status);

-- Index: idx_logbook_user_token
CREATE INDEX idx_logbook_user_token ON logbook(user_token);

-- Index: idx_magic_links_created_at
CREATE INDEX idx_magic_links_created_at ON magic_links(created_at);

-- Index: idx_magic_links_email
CREATE INDEX idx_magic_links_email ON magic_links(email);

-- Index: idx_magic_links_expires_at
CREATE INDEX idx_magic_links_expires_at ON magic_links(expires_at);

-- Index: idx_magic_links_used_at
CREATE INDEX idx_magic_links_used_at ON magic_links(used_at);

-- Index: idx_moderation_decisions_artwork
CREATE INDEX idx_moderation_decisions_artwork ON moderation_decisions(artwork_id) WHERE artwork_id IS NOT NULL;

-- Index: idx_moderation_decisions_created_at
CREATE INDEX idx_moderation_decisions_created_at ON moderation_decisions(created_at);

-- Index: idx_moderation_decisions_decision
CREATE INDEX idx_moderation_decisions_decision ON moderation_decisions(decision);

-- Index: idx_moderation_decisions_moderator
CREATE INDEX idx_moderation_decisions_moderator ON moderation_decisions(moderator_uuid);

-- Index: idx_moderation_decisions_submission
CREATE INDEX idx_moderation_decisions_submission ON moderation_decisions(submission_id);

-- Index: idx_rate_limiting_blocked_until
CREATE INDEX idx_rate_limiting_blocked_until ON rate_limiting(blocked_until);

-- Index: idx_rate_limiting_identifier
CREATE INDEX idx_rate_limiting_identifier ON rate_limiting(identifier);

-- Index: idx_rate_limiting_window_start
CREATE INDEX idx_rate_limiting_window_start ON rate_limiting(window_start);

-- Index: idx_tags_artwork_id
CREATE INDEX idx_tags_artwork_id ON tags(artwork_id);

-- Index: idx_tags_label
CREATE INDEX idx_tags_label ON tags(label);

-- Index: idx_tags_logbook_id
CREATE INDEX idx_tags_logbook_id ON tags(logbook_id);

-- Index: idx_user_permissions_active
CREATE UNIQUE INDEX idx_user_permissions_active ON user_permissions(user_uuid, permission) WHERE is_active = 1;

-- Index: idx_user_permissions_granted_by
CREATE INDEX idx_user_permissions_granted_by ON user_permissions(granted_by);

-- Index: idx_user_permissions_permission
CREATE INDEX idx_user_permissions_permission ON user_permissions(permission);

-- Index: idx_user_permissions_user
CREATE INDEX idx_user_permissions_user ON user_permissions(user_uuid);

-- Index: idx_users_email
CREATE INDEX idx_users_email ON users(email);

-- Index: idx_users_last_login
CREATE INDEX idx_users_last_login ON users(last_login);

-- Index: idx_users_status
CREATE INDEX idx_users_status ON users(status);

-- ================================
-- Sample Data
-- ================================

-- Cultural Archiver Sample Data
-- Generated on: 2025-01-01T00:00:00.000Z
-- Default timestamp: 2025-01-01T00:00:00.000Z
--
-- This file contains sample data as specified in the PRD:
-- - Three predefined users with specified UUIDs
-- - Sample artworks with Vancouver area coordinates (within 100m of 49.2679864,-123.0239578)
-- - Sample logbook entries with proper foreign key relationships
-- - Sample moderation records
-- - All timestamps default to January 1, 2025

-- ================================
-- Pre-populate artwork types
-- ================================
INSERT OR IGNORE INTO artwork_types (id, name, description) VALUES
    ('public_art', 'Public Art', 'Public art installations and commissioned works'),
    ('street_art', 'Street Art', 'Street art, murals, and graffiti'),
    ('mural', 'Mural', 'Large wall paintings and murals'),
    ('monument', 'Monument', 'Monuments, memorials, and commemorative structures'),
    ('sculpture', 'Sculpture', 'Sculptural works and installations'),
    ('installation', 'Installation', 'Art installations and interactive works'),
    ('other', 'Other', 'Other types of public artwork');

-- ================================
-- Sample Users (as specified in PRD)
-- ================================
INSERT OR IGNORE INTO users (uuid, email, display_name, role, email_verified_at, created_at, updated_at)
VALUES 
    ('00000000-0000-0000-0000-000000000001', 'sampledata@funvill.com', 'Sample Data User', 'user', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('00000000-0000-0000-0000-000000000002', 'massimport@funvill.com', 'Mass Import User', 'user', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'steven@abluestar.com', 'Steven Smethurst', 'admin', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample Creators
-- ================================
INSERT OR IGNORE INTO creators (id, name, bio, created_at) VALUES
    ('creator-emily-chen', 'Emily Chen', 'Contemporary sculptor specializing in bronze works', '2025-01-01T00:00:00.000Z'),
    ('creator-david-martinez', 'David Martinez', 'Street artist and muralist active in Vancouver', '2025-01-01T00:00:00.000Z'),
    ('creator-sarah-thompson', 'Sarah Thompson', 'Public art designer and urban planner', '2025-01-01T00:00:00.000Z'),
    ('creator-unknown', 'Unknown Artist', 'Placeholder for artworks with unknown creators', '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample Artwork (within 100m of Vancouver coordinates: 49.2679864,-123.0239578)
-- All assigned to massimport@funvill.com as specified in PRD
-- ================================
INSERT OR IGNORE INTO artwork (id, lat, lon, type_id, status, title, description, user_token, photos, tags, notes, location_description, created_at, updated_at)
VALUES 
    ('artwork-sample-001', 49.2685, -123.0235, 'mural', 'approved', 'Rainbow Hearts Mural', 'Colorful mural featuring rainbow hearts and positive messages', '00000000-0000-0000-0000-000000000002', '[]', '["street-art", "colorful", "community"]', 'Beautiful community mural on the side of a local business', 'Near Vancouver Art Gallery, West Side', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('artwork-sample-002', 49.2675, -123.0245, 'sculpture', 'approved', 'Steel Wave Sculpture', 'Modern steel sculpture resembling ocean waves', '00000000-0000-0000-0000-000000000002', '[]', '["modern", "metal", "ocean"]', 'Impressive steel sculpture that changes appearance with lighting', 'Downtown Vancouver, Robson Square Area', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('artwork-sample-003', 49.2680, -123.0240, 'installation', 'pending', 'Interactive Light Display', 'Digital art installation with responsive LED displays', '00000000-0000-0000-0000-000000000002', '[]', '["interactive", "digital", "lights"]', 'Interactive installation that responds to movement and sound', 'Vancouver Convention Centre Area', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z');

-- ================================
-- Link artworks to creators
-- ================================
INSERT OR IGNORE INTO artwork_creators (id, artwork_id, creator_id, role, created_at) VALUES
    ('ac-001', 'artwork-sample-001', 'creator-david-martinez', 'artist', '2025-01-01T00:00:00.000Z'),
    ('ac-002', 'artwork-sample-002', 'creator-emily-chen', 'sculptor', '2025-01-01T00:00:00.000Z'),
    ('ac-003', 'artwork-sample-003', 'creator-sarah-thompson', 'designer', '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample Logbook Entries (linked to artworks and users)
-- All assigned to massimport@funvill.com as specified in PRD
-- ================================
INSERT OR IGNORE INTO logbook (id, artwork_id, user_token, lat, lon, status, notes, photos, created_at, updated_at)
VALUES 
    -- Approved entries
    ('logbook-sample-001', 'artwork-sample-001', '00000000-0000-0000-0000-000000000002', 49.2685, -123.0235, 'approved', 'First documentation of the rainbow hearts mural. Great condition and very popular with locals.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-002', 'artwork-sample-001', '00000000-0000-0000-0000-000000000001', 49.2685, -123.0235, 'approved', 'Second visit to the mural - still looks great, no signs of wear.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-003', 'artwork-sample-002', '00000000-0000-0000-0000-000000000002', 49.2675, -123.0245, 'approved', 'Documentation of steel wave sculpture. Impressive craftsmanship and beautiful in the evening light.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-004', 'artwork-sample-002', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 49.2675, -123.0245, 'approved', 'Admin review of sculpture - excellent condition, well-maintained by city.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-006', 'artwork-sample-001', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 49.2685, -123.0235, 'approved', 'Final approval notes - mural meets all guidelines and adds value to the community.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-007', 'artwork-sample-002', '00000000-0000-0000-0000-000000000001', 49.2675, -123.0245, 'approved', 'Community feedback - this sculpture has become a popular meeting spot.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-009', 'artwork-sample-001', '00000000-0000-0000-0000-000000000002', 49.2685, -123.0235, 'approved', 'Condition update - some minor fading but overall excellent condition.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    
    -- Pending entries
    ('logbook-sample-005', 'artwork-sample-003', '00000000-0000-0000-0000-000000000002', 49.2680, -123.0240, 'pending', 'Initial documentation of interactive light display. Installation appears to be complete.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('logbook-sample-008', 'artwork-sample-003', '00000000-0000-0000-0000-000000000001', 49.2680, -123.0240, 'pending', 'User submission notes - the interactive features work well during evening hours.', '[]', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample Tags
-- ================================
INSERT OR IGNORE INTO tags (id, artwork_id, logbook_id, label, value, created_at) VALUES
    ('tag-001', 'artwork-sample-001', NULL, 'material', 'paint', '2025-01-01T00:00:00.000Z'),
    ('tag-002', 'artwork-sample-001', NULL, 'style', 'street-art', '2025-01-01T00:00:00.000Z'),
    ('tag-003', 'artwork-sample-001', NULL, 'theme', 'community', '2025-01-01T00:00:00.000Z'),
    ('tag-004', 'artwork-sample-002', NULL, 'material', 'steel', '2025-01-01T00:00:00.000Z'),
    ('tag-005', 'artwork-sample-002', NULL, 'style', 'modern', '2025-01-01T00:00:00.000Z'),
    ('tag-006', 'artwork-sample-002', NULL, 'theme', 'ocean', '2025-01-01T00:00:00.000Z'),
    ('tag-007', 'artwork-sample-003', NULL, 'material', 'led', '2025-01-01T00:00:00.000Z'),
    ('tag-008', 'artwork-sample-003', NULL, 'style', 'digital', '2025-01-01T00:00:00.000Z'),
    ('tag-009', NULL, 'logbook-sample-004', 'condition', 'excellent', '2025-01-01T00:00:00.000Z'),
    ('tag-010', NULL, 'logbook-sample-007', 'popularity', 'high', '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample Consent Records
-- ================================
INSERT OR IGNORE INTO consent_records (id, user_token, consent_version, age_verification, cc0_licensing, public_commons, freedom_of_panorama, consented_at) VALUES
    ('consent-001', '00000000-0000-0000-0000-000000000001', '1.0.0', TRUE, TRUE, TRUE, TRUE, '2025-01-01T00:00:00.000Z'),
    ('consent-002', '00000000-0000-0000-0000-000000000002', '1.0.0', TRUE, TRUE, TRUE, TRUE, '2025-01-01T00:00:00.000Z'),
    ('consent-003', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', '1.0.0', TRUE, TRUE, TRUE, TRUE, '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample Moderation Records (assigned to steven@abluestar.com)
-- ================================
INSERT OR IGNORE INTO moderation (id, artwork_id, logbook_id, moderator_uuid, action, reason, status, created_at, updated_at)
VALUES 
    ('moderation-001', 'artwork-sample-001', NULL, '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'approve', 'Quality artwork submission that meets all guidelines', 'completed', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('moderation-002', 'artwork-sample-002', NULL, '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'approve', 'Excellent sculpture submission with proper documentation', 'completed', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('moderation-003', NULL, 'logbook-sample-005', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'approve', 'Pending review of interactive installation documentation', 'pending', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z'),
    ('moderation-004', NULL, 'logbook-sample-008', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'approve', 'Community feedback review - valuable user input', 'pending', '2025-01-01T00:00:00.000Z', '2025-01-01T00:00:00.000Z');

-- ================================
-- Sample User Permissions
-- ================================
INSERT OR IGNORE INTO user_permissions (id, user_uuid, permission, granted_by, granted_at, is_active, notes) VALUES
    ('perm-001', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'admin', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', '2025-01-01T00:00:00.000Z', 1, 'System administrator privileges');

-- ================================
-- Sample Admin Audit Log
-- ================================
INSERT OR IGNORE INTO admin_audit_log (id, admin_uuid, target_uuid, action, resource_type, resource_id, old_values, new_values, created_at)
VALUES 
    ('audit-001', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', NULL, 'artwork_approve', 'artwork', 'artwork-sample-001', '{"status": "pending"}', '{"status": "approved"}', '2025-01-01T00:00:00.000Z'),
    ('audit-002', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', NULL, 'artwork_approve', 'artwork', 'artwork-sample-002', '{"status": "pending"}', '{"status": "approved"}', '2025-01-01T00:00:00.000Z'),
    ('audit-003', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', '6c970b24-f64a-49d9-8c5f-8ae23cc2af47', 'permission_grant', 'user_permissions', 'perm-001', '{}', '{"permission": "admin"}', '2025-01-01T00:00:00.000Z');
